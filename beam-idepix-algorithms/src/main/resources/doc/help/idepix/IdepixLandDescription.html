<!--
  ~ Copyright (C) 2013 Brockmann Consult GmbH (info@brockmann-consult.de)
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html>
<head>
    <title>IdePix Pixel Classification over Land</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            IdePix
        </td>
        <td class="header" align="right"><a href="../general/BeamOverview.html"><img src="../images/BeamHeader.jpg"
                                                                                     border=0></a>
        </td>
    </tr>
</table>

<!-------- Land Processor (GlobAlbedo/LC CCI) --------------------------------------->
<h3>IdePix Land Pixel Classification</h3>

<h4>I/O Parameters</h4>

<p>
    Selecting the <b>IDEPIX Generic classification of pixels...</b> entry from the VISAT tool menu opens another
    sub-menu with the two entries 'Water...' and 'Land...'. Selecting 'Land' from this sub-menu pops up the
    'IDEPIX Pixel Identification Tool - Land' dialog:
</p>

<p align="center">
    <img src="images/IdepixLandProcessingDialog_io.png" alt="Idepix land Processing Dialog"/>
</p>

<h5>Source Products</h5>

<p class="i1">
    <b>L1b product:</b>
    Here the user specifies the MERIS or SPOT-VGT L1b source product. The combo box presents
    a list of all products open in VISAT. The user may select one of these
    or, by clicking on the button next to the combo box, choose a product
    from the file system.
</p>

<h5>Target Product Group</h5>

<p class="i1">
    <b>Name:</b>
    Used to specify the name of the target product.
</p>

<p class="i1">
    <b>Save to:</b>
    Used to specify whether the target product should be saved to the file system. The
    combo box presents a list of file formats, currently BEAM-DIMAP, GeoTIFF, and HDF5.
</p>

<p class="i1">
    <b>Open in VISAT:</b>
    Used to specify whether the target product should be opened in VISAT. When the
    the target product is not saved, it is opened in VISAT automatically.
</p>


<h4>Processing Parameters</h4>

<p>
    Selecting the <b>Processing Parameters</b> tab in the
    'IDEPIX Pixel Identification Tool - land' dialog switches to the following view:
</p>

<p align="center">
    <img src="images/IdepixLandProcessingDialog_procparms.png" alt="Idepix Land Processing Parameters"/>
</p>

<h5>Parameters</h5>

<p class="i1">
    <b>Write TOA radiances to the target product:</b>
    This checkbox indicates if the TOA radiances shall be written to the target product.
</p>

<p class="i1">
    <b>Write TOA reflectances to the target product:</b>
    This checkbox indicates if the TOA reflectances shall be written to the target product.
</p>

<p class="i1">
    <b>Write Rayleigh corrected reflectances to the target product:</b>
    This checkbox indicates if the Rayleigh corrected reflectances shall be written to the target product.
</p>

<p class="i1">
    <b>Write Feature values to the target product:</b>
    This checkbox indicates if the feature values for a pixel shall be written to the target product.
    In the land classification algorithm, a feature value (e.g. the 'brightness value') is a probabilistic
    quantity that the corresponding feature (e.g. 'brightness') is true or not. The probabilistic combination
    of features, using internal thresholds of the feature values, leads to the final classification
    of the pixel attributes (e.g. 'is_cloudy'). See [7] for more details.
</p>

<p class="i1">
    <b>CTP value to use in MERIS cloud shadow algorithm:</b>
    This value is the CTP (cloud top pressure) in hPa to use in the MERIS cloud shadow algorithm. This can be
    derived from a neural net or set as a constant number.
</p>

<p class="i1">
    <b>Use GETASSE30 DEM for Barometric Pressure Computation:</b>
    This checkbox indicates if the GETASSE30 DEM shall be used for Barometric Pressure Computation. If the checkbox
    is not selected or GETASSE is not installed, tie point altitudes will be used instead.
</p>

<p class="i1">
    <b>Write input annotation bands to the target product (VGT only):</b>
    This checkbox indicates if input annotation bands shall be written to the target product
    (has only effect for VGT L1b products).
</p>

<p class="i1">
    <b>Width of cloud buffer (# of pixels):</b>
    This value is the width of a cloud 'safety buffer' around a pixel which was classified as cloudy.
</p>

<p class="i1">
    <b>Resolution of used land-water mask in m/pixel:</b>
    This value is the resolution of the used SRTM (Shuttle Radar Topography Mission, see [8]) land-water mask in m/pixel.
</p>

<p class="i1">
    <b>Use land-water flag from L1b product instead:</b>
    This checkbox indicates if the land-water flag from the L1b product shall be used instead of the SRTM mask.
</p>

<br>

<h4>Menu Bar</h4>
<h5>'File' Menu</h5>

<p>
    Selecting the <b>File</b> entry in the Menu Bar opens the following view:
</p>

<p align="center">
    <img src="images/file_menu.png" alt="File Menu"/>
</p>

<p class="i1">
    <b>Open Parameters...:</b>
    When this entry is selected, an 'Open File' dialog will appear.
    Here, a BEAM GPF parameters XML file can be selected, containing
    IdePix land pixel classification processing parameters which were saved earlier.
    These parameters will be loaded and applied for an upcoming processing.
</p>

<p class="i1">
    <b>Save Parameters...:</b>
    When this entry is selected, a 'Save File' dialog will appear.
    Here, the current set of IdePix land pixel classification parameters can be saved into a
    BEAM GPF parameters XML file for later re-usage.
</p>

<p class="i1">
    <b>Display Parameters...:</b>
    When this entry is selected, the current set of IdePix land pixel classification parameters
    will be displayed in XML format (see below).
</p>

<p align="center">
    <img src="images/land_file_menu_display_params.png" alt="Land File Menu Display Parms"/>
</p>


<h5>'Help' Menu</h5>

<p>
    Selecting the <b>Help</b> entry in the Menu Bar opens the following view:
</p>

<p align="center">
    <img src="images/help_menu.png" alt="Help Menu"/>
</p>

<p class="i1">
    <b>Help:</b>
    When this entry is selected, this online help is opened
    in a separate window.
</p>

<p class="i1">
    <b>About...:</b>
    When this entry is selected, an 'About' dialog for the current
    processor is opened (see below).
</p>

<p align="center">
    <img src="images/land_help_menu_about.png" alt="Help Menu About"/>
</p>


<h4>Button Group</h4>

<p align="center">
    <img src="images/button_group.png" alt="Button Group"/>
</p>

<p class="i1">
    <b>Run:</b>
    When this button is clicked, the processing will be started with the selected
    parameters.
</p>

<p class="i1">
    <b>Close:</b>
    When this button is clicked, the processor tool window will be closed.
</p>


<br>
<hr>

<!-------- Command line --------------------------------------->
<h3>Processing from Command Line</h3>

Since the IdePix land pixel classification makes use of the BEAM graph processing framework, it can be
used also with the 'gpt' command line tool outside BEAM-VISAT. The graph processing is invoked
by the command
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt
        </li>
    </ul>
</div>

To obtain general help on the graph processing, use the command
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt -h
        </li>
    </ul>
</div>

Specific help on the IdePix land pixel classification can be obtained with
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt -h Idepix.Land
        </li>
    </ul>
</div>
Information on the usage and a list of all available parameters are given.

<p align="center">
    <img src="images/gpt_idepix_land.png" alt="IdePix land pixel classification parameters"/>
</p>
<br>

<br><br>
The processing from the command line can also be invoked using graph XML files.
For example, an IdePix land pixel classification could be started with
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt test_idepix_land.xml -Sl1bProduct=./MER_Idepix_test.dim

        </li>
    </ul>
</div>
with a MERIS L1b input file 'MER_Idepix_test.dim' (given in BEAM Dimap format) in the current directory,
and a graph XML file 'test_idepix_land.xml' as shown below.

<p align="center">
    <img src="images/gpt_idepix_land_xml.png" alt="IdePix land pixel classification"/>
</p>

<hr>
</body>
</html>
