<!--
  ~ Copyright (C) 2013 Brockmann Consult GmbH (info@brockmann-consult.de)
  ~
  ~ This program is free software; you can redistribute it and/or modify it
  ~ under the terms of the GNU General Public License as published by the Free
  ~ Software Foundation; either version 3 of the License, or (at your option)
  ~ any later version.
  ~ This program is distributed in the hope that it will be useful, but WITHOUT
  ~ ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
  ~ FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
  ~ more details.
  ~
  ~ You should have received a copy of the GNU General Public License along
  ~ with this program; if not, see http://www.gnu.org/licenses/
  -->

<html>
<head>
    <title>IdePix Pixel Classification over Water</title>
    <link rel="stylesheet" href="../style.css">
</head>

<body>

<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            IdePix
        </td>
        <td class="header" align="right"><a href="../general/BeamOverview.html"><img src="../images/BeamHeader.jpg"
                                                                                     border=0></a>
        </td>
    </tr>
</table>

<!-------- Water Processor (CC/OC CCI) --------------------------------------->
<h3>IdePix Water Pixel Classification</h3>

<h4>I/O Parameters</h4>

<p>
    Selecting the <b>IDEPIX Generic classification of pixels...</b> entry from the VISAT tool menu opens another
    sub-menu with the two entries 'Water...' and 'Land...'. Selecting 'Water' from this sub-menu pops up the 'IDEPIX
    Pixel Identification Tool - Water' dialog:
</p>

<p align="center">
    <img src="images/IdepixWaterProcessingDialog_io.png" alt="Idepix Water Processing Dialog"/>
</p>

<h5>Source Products</h5>

<p class="i1">
    <b>MERIS L1b product:</b>
    Here the user specifies the MERIS L1b source product. The combo box presents
    a list of all products open in VISAT. The user may select one of these
    or, by clicking on the button next to the combo box, choose a product
    from the file system.
</p>

<h5>Target Product Group</h5>

<p class="i1">
    <b>Name:</b>
    Used to specify the name of the target product.
</p>

<p class="i1">
    <b>Save to:</b>
    Used to specify whether the target product should be saved to the file system. The
    combo box presents a list of file formats, currently BEAM-DIMAP, GeoTIFF, and HDF5.
</p>

<p class="i1">
    <b>Open in VISAT:</b>
    Used to specify whether the target product should be opened in VISAT. When the
    the target product is not saved, it is opened in VISAT automatically.
</p>


<h4>Processing Parameters</h4>

<p>
    Selecting the <b>Processing Parameters</b> tab in the
    'IDEPIX Pixel Identification Tool - water' dialog switches to the following view:
</p>

<p align="center">
    <img src="images/IdepixWaterProcessingDialog_procparms.png" alt="Idepix Water Processing Parameters"/>
</p>

<h5>Parameters</h5>

<p class="i1">
    <b>Write TOA reflectances to the target product:</b>
    This checkbox indicates if the TOA reflectances shall be written to the target product.
</p>

<p class="i1">
    <b>Write gas absorption correction flag to the target product:</b>
    This checkbox indicates if the gas absorption correction flag shall be written to the target
    product. The coding of the gas absorption correction flag is shown in the figure below.
</p>

<p align="center">
    <img src="images/gas_flags.png" alt="Idepix Water Gas Flags"/>
</p>

<p class="i1">
    <b>Write Rayleigh corrected reflectances to the target product:</b>
    This checkbox indicates if the Rayleigh corrected reflectances shall be written to the target product.
</p>

<p class="i1">
    <b>Write Spectral Unmixing Abundance Bands to the target product:</b>
    This checkbox indicates if the abundance bands from the spectral unmixing process
    shall be written to the target product. For more details see the help documentation of the
    BEAM
    <it>Spectral Unmixing Tool</it>
    [4].
</p>

<p class="i1">
    <b>Write Cloud Probability Feature Value to the target product:</b>
    This checkbox indicates if the Cloud Probability Feature Value shall be written to the target product.
    This value is a floating point number in the interval [1.0, 2.0] describing the increasing probability of a pixel
    being cloudy (1.0 = certainly clear, 2.0 = certainly cloudy).
</p>

<p class="i1">
    <b>Write Sea Ice Climatology Max Value to the target product:</b>
    This checkbox indicates if the Sea Ice Climatology Max Value shall be written to the target product.
    This value is a probability in the interval [0.0, 100.0] describing the maximum probability of a pixel
    being covered by sea ice, with respect to a global sea ice climatology given on monthly resolution.
</p>

<p class="i1">
    <b>Width of cloud buffer (# of pixels):</b>
    This value is the width of a cloud 'safety buffer' around a pixel which was classified as cloudy.
</p>

<p class="i1">
    <b>Cloud screening 'ambiguous' threshold:</b>
    This value is the threshold of Cloud Probability Feature Value above which a cloud is regarded as still ambiguous.
    'Ambiguous' means that this cloud is not 100% sure, and an atmospheric correction may be possible, depending on the performance of
    an atmospheric correction and the accuracy requirements.
</p>

<p class="i1">
    <b>Cloud screening 'sure' threshold:</b>
    This value is the threshold of Cloud Probability Feature Value above which a cloud is regarded as sure.
</p>

<br>

<h4>Menu Bar</h4>
<h5>'File' Menu</h5>

<p>
    Selecting the <b>File</b> entry in the Menu Bar opens the following view:
</p>

<p align="center">
    <img src="images/file_menu.png" alt="File Menu"/>
</p>

<p class="i1">
    <b>Open Parameters...:</b>
    When this entry is selected, an 'Open File' dialog will appear.
    Here, a BEAM GPF parameters XML file can be selected, containing
    IdePix water pixel classification parameters which were saved earlier.
    These parameters will be loaded and applied for an upcoming processing.
</p>

<p class="i1">
    <b>Save Parameters...:</b>
    When this entry is selected, a 'Save File' dialog will appear.
    Here, the current set of IdePix water pixel classification parameters can be saved into a
    BEAM GPF parameters XML file for later re-usage.
</p>

<p class="i1">
    <b>Display Parameters...:</b>
    When this entry is selected, the current set of IdePix water pixel classification parameters
    will be displayed in XML format (see below).
</p>

<p align="center">
    <img src="images/water_file_menu_display_params.png" alt="Water File Menu Display Parms"/>
</p>


<h5>'Help' Menu</h5>

<p>
    Selecting the <b>Help</b> entry in the Menu Bar opens the following view:
</p>

<p align="center">
    <img src="images/help_menu.png" alt="Help Menu"/>
</p>

<p class="i1">
    <b>Help:</b>
    When this entry is selected, this online help is opened
    in a separate window.
</p>

<p class="i1">
    <b>About...:</b>
    When this entry is selected, an 'About' dialog for the current
    processor is opened (see below).
</p>

<p align="center">
    <img src="images/water_help_menu_about.png" alt="Help Menu About"/>
</p>


<h4>Button Group</h4>

<p align="center">
    <img src="images/button_group.png" alt="Button Group"/>
</p>

<p class="i1">
    <b>Run:</b>
    When this button is clicked, the processing will be started with the selected
    parameters.
</p>

<p class="i1">
    <b>Close:</b>
    When this button is clicked, the processor tool window will be closed.
</p>


<br>
<hr>

<!-------- Command line --------------------------------------->
<h3>Processing from Command Line</h3>

Since the IdePix water pixel classification makes use of the BEAM graph processing framework, it can be
used also with the 'gpt' command line tool outside BEAM-VISAT. The graph processing is invoked
by the command
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt
        </li>
    </ul>
</div>

To obtain general help on the graph processing, use the command
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt -h
        </li>
    </ul>
</div>

Specific help on the IdePix water pixel classification can be obtained with
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt -h Idepix.Water
        </li>
    </ul>
</div>
Information on the usage and a list of all available parameters are given.

<p align="center">
    <img src="images/gpt_idepix_water.png" alt="IdePix water pixel classification parameters"/>
</p>
<br>

<br><br>
The processing from the command line can also be invoked using graph XML files.
For example, an IdePix water pixel classification could be started with
<div class="itemizedlist">
    <ul type="bullet">
        <li style="list-style-type: disc">
            ${BEAM-INSTALL-DIR}/bin/gpt test_idepix_water.xml -Sl1bProduct=./MER_Idepix_test.dim

        </li>
    </ul>
</div>
with a MERIS L1b input file 'MER_Idepix_test.dim' (given in BEAM Dimap format) in the current directory,
and a graph XML file 'test_idepix_water.xml' as shown below.

<p align="center">
    <img src="images/gpt_idepix_water_xml.png" alt="IdePix water pixel classification"/>
</p>

<hr>
</body>
</html>
